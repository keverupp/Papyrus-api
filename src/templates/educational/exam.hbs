<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family:
      'Times New Roman', serif; font-size: 12px; line-height: 1.5; color: #000;
      background: white; } .container { width: 100%; max-width: 800px; margin: 0
      auto; padding: 15px; } .header { text-align: center; margin-bottom: 25px;
      border-bottom: 2px solid #000; padding-bottom: 15px; } .header h1 {
      font-size: 20px; font-weight: bold; margin-bottom: 8px; text-transform:
      uppercase; } .exam-info { display: flex; justify-content: space-between;
      margin: 15px 0; font-size: 11px; } .exam-info div { flex: 1; }
      .student-info { border: 1px solid #000; padding: 10px; margin-bottom:
      20px; background: #f9f9f9; } .student-info h3 { font-size: 12px;
      margin-bottom: 8px; border-bottom: 1px solid #ccc; padding-bottom: 3px; }
      .student-fields { display: flex; gap: 20px; margin-top: 10px; } .field {
      flex: 1; border-bottom: 1px solid #000; padding-bottom: 2px;
      margin-bottom: 8px; } .field label { font-size: 10px; color: #666;
      display: block; } .instructions { background: #f0f0f0; border: 1px solid
      #ccc; padding: 12px; margin-bottom: 20px; border-radius: 3px; }
      .instructions h4 { font-size: 12px; margin-bottom: 8px; font-weight: bold;
      } .instructions ul { margin-left: 20px; font-size: 10px; } .instructions
      li { margin-bottom: 3px; } .question { margin-bottom: 25px;
      page-break-inside: avoid; } .question-header { display: flex; align-items:
      flex-start; margin-bottom: 8px; } .question-number { font-weight: bold;
      min-width: 30px; font-size: 12px; } .question-text { flex: 1; font-size:
      12px; line-height: 1.4; } .question-points { font-size: 10px; color: #666;
      font-style: italic; margin-left: 10px; } .options { margin-left: 30px;
      margin-top: 8px; } .option { display: flex; align-items: flex-start;
      margin-bottom: 5px; font-size: 11px; } .option-letter { font-weight: bold;
      min-width: 20px; } .option-text { flex: 1; } .answer-space { margin-left:
      30px; margin-top: 10px; min-height: 40px; border-bottom: 1px solid #ccc;
      position: relative; } .answer-space.large { min-height: 80px; }
      .answer-space.xlarge { min-height: 120px; } .answer-lines { position:
      absolute; top: 0; left: 0; right: 0; bottom: 0; } .answer-line {
      border-bottom: 1px solid #ddd; height: 20px; margin-bottom: 2px; }
      .essay-space { margin-top: 15px; min-height: 200px; border: 1px solid
      #ccc; position: relative; page-break-inside: avoid; } .essay-lines {
      position: absolute; top: 0; left: 0; right: 0; bottom: 0; padding: 10px; }
      .essay-line { border-bottom: 1px solid #eee; height: 18px; margin-bottom:
      1px; } .page-break { page-break-before: always; } .footer { position:
      fixed; bottom: 10px; left: 0; right: 0; text-align: center; font-size:
      9px; color: #666; } @media print { body { font-size: 11px; } .container {
      padding: 10px; } .footer { position: absolute; } }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Cabeçalho -->
      <div class="header">
        <h1>{{title}}</h1>
        {{#if exam.institution}}
          <div
            style="font-size: 14px; margin-top: 5px;"
          >{{exam.institution}}</div>
        {{/if}}
      </div>

      <!-- Informações do Exame -->
      <div class="exam-info">
        <div><strong>Disciplina:</strong> {{exam.subject}}</div>
        <div><strong>Data:</strong> {{date "DD/MM/YYYY"}}</div>
        <div><strong>Duração:</strong> {{exam.duration}}</div>
        {{#if exam.professor}}
          <div><strong>Professor:</strong> {{exam.professor}}</div>
        {{/if}}
      </div>

      <!-- Informações do Aluno -->
      <div class="student-info">
        <h3>Dados do Aluno</h3>
        <div class="student-fields">
          <div class="field">
            <label>Nome:</label>
            <div style="height: 15px;"></div>
          </div>
          <div class="field" style="max-width: 120px;">
            <label>Matrícula:</label>
            <div style="height: 15px;"></div>
          </div>
          <div class="field" style="max-width: 80px;">
            <label>Turma:</label>
            <div style="height: 15px;"></div>
          </div>
        </div>
      </div>

      <!-- Instruções -->
      {{#if exam.instructions}}
        <div class="instructions">
          <h4>Instruções</h4>
          {{#if exam.instructions.list}}
            <ul>
              {{#each exam.instructions.list}}
                <li>{{this}}</li>
              {{/each}}
            </ul>
          {{else}}
            <div style="font-size: 11px;">{{{br exam.instructions}}}</div>
          {{/if}}
        </div>
      {{/if}}

      <!-- Questões -->
      {{#if exam.questions}}
        {{#each exam.questions}}
          <div class="question">
            <div class="question-header">
              <div class="question-number">{{math @index "+" 1}}.</div>
              <div class="question-text">{{{br text}}}</div>
              {{#if points}}
                <div class="question-points">({{points}} pts)</div>
              {{/if}}
            </div>

            {{#ifCond type "===" "multiple_choice"}}
              <!-- Questão Múltipla Escolha -->
              {{#if options}}
                <div class="options">
                  {{#each options}}
                    <div class="option">
                      <div class="option-letter">{{#ifCond
                          @index "===" 0
                        }}a){{/ifCond}}{{#ifCond
                          @index "===" 1
                        }}b){{/ifCond}}{{#ifCond
                          @index "===" 2
                        }}c){{/ifCond}}{{#ifCond
                          @index "===" 3
                        }}d){{/ifCond}}{{#ifCond
                          @index "===" 4
                        }}e){{/ifCond}}</div>
                      <div class="option-text">{{this}}</div>
                    </div>
                  {{/each}}
                </div>
              {{/if}}
            {{/ifCond}}

            {{#ifCond type "===" "short_answer"}}
              <!-- Questão Dissertativa Curta -->
              <div class="answer-space">
                <div class="answer-lines">
                  {{#times 2}}
                    <div class="answer-line"></div>
                  {{/times}}
                </div>
              </div>
            {{/ifCond}}

            {{#ifCond type "===" "long_answer"}}
              <!-- Questão Dissertativa Longa -->
              <div class="answer-space large">
                <div class="answer-lines">
                  {{#times 4}}
                    <div class="answer-line"></div>
                  {{/times}}
                </div>
              </div>
            {{/ifCond}}

            {{#ifCond type "===" "essay"}}
              <!-- Questão de Redação -->
              <div class="essay-space">
                <div class="essay-lines">
                  {{#times 10}}
                    <div class="essay-line"></div>
                  {{/times}}
                </div>
              </div>
            {{/ifCond}}

            {{#ifCond type "===" "calculation"}}
              <!-- Questão de Cálculo -->
              <div class="answer-space xlarge">
                <div class="answer-lines">
                  {{#times 6}}
                    <div class="answer-line"></div>
                  {{/times}}
                </div>
              </div>
            {{/ifCond}}
          </div>
        {{/each}}
      {{/if}}

      {{#if exam.hasEssaySection}}
        <!-- Seção de Redação -->
        <div class="page-break"></div>
        <div
          style="text-align: center; font-weight: bold; font-size: 14px; margin-bottom: 20px;"
        >
          FOLHA DE REDAÇÃO
        </div>
        <div class="essay-space" style="min-height: 500px;">
          <div class="essay-lines">
            {{#times 25}}
              <div class="essay-line"></div>
            {{/times}}
          </div>
        </div>
      {{/if}}
    </div>

    <div class="footer">
      {{exam.subject}}
      -
      {{date "DD/MM/YYYY"}}
      - Página 1
    </div>
  </body>
</html>